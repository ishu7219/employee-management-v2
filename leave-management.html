<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Leave Management</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="leave-management.css">
</head>
<body>
  <div class="sidebar">
    <div class="sidebar-logo-row">
      <div class="sidebar-squares">
        <div class="sq1"></div>
        <div class="sq2"></div>
        <div class="sq3"></div>
        <div class="sq4"></div>
      </div>
      <span class="sidebar-title">ADMIN PANEL</span>
    </div>
    <nav class="flex-column">
      
      <a href="user-management.html" class="nav-link"><i class="fa fa-users"></i> User Management</a>
      <a href="system-management.html" class="nav-link"><i class="fa fa-sliders-h"></i> Salary management</a>
      <a href="leave-management.html" class="nav-link active"><i class="fa fa-calendar-xmark"></i> Leave management</a>
      
      <a href="calendar.html" class="nav-link"><i class="fa fa-calendar-day"></i> Calendar</a>
      <a href="settings.html" class="nav-link"><i class="fa fa-gear"></i> Settings</a>
    </nav>
  </div>
  <div class="main-panel">
    <div class="header-row">
      <h3 style="font-weight:600;">Leave management</h3>
      <nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '>';">
        <ol class="breadcrumb small" style="margin-bottom:22px;">
          <li class="breadcrumb-item">Home</li>
          <li class="breadcrumb-item active" aria-current="page">Leave</li>
        </ol>
      </nav>
    </div>
    <div class="admin-manager-card">
      <label style="font-weight:500;">Search</label>
      <div class="search-row mt-2">
        <label style="color:#555;">Search by leave type</label>
        <input type="text" id="searchLeaveType" placeholder="Leave type"/>
        <button class="btn btn-success" onclick="searchLeaves()">Search</button>
        <button class="btn btn-danger" onclick="clearLeaveSearch()">Clear</button>
      </div>
    </div>
    <div class="table-box">
      <label style="font-weight:500; margin-bottom:7px;">Leave List</label>
      <table class="table table-bordered align-middle">
        <thead>
          <tr>
            <th>S.N</th>
            <th>Employee name</th>
            <th>Leave type</th>
            <th>Date from</th>
            <th>Date to</th>
            <th>No. of days</th>
            <th>Reason</th>
            <th>Leave type offer</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="leaveTableBody"></tbody>
      </table>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let leaves = [
      {
        emp: "abcd",
        type: "Sick leave",
        from: "2019-04-17",
        to: "2019-04-20",
        days: 4,
        reason: "Doctor recommend to take rest for few days",
        offer: "Paid",
        status: "Reject"
      },
      {
        emp: "bishal",
        type: "Sick leave",
        from: "2019-04-20",
        to: "2019-04-23",
        days: 3,
        reason: "Suffering from high fever",
        offer: "Paid",
        status: "Approve"
      },
      {
        emp: "bishal",
        type: "abcd",
        from: "2019-04-21",
        to: "2019-04-23",
        days: 3,
        reason: "abcd",
        offer: "Unpaid",
        status: "Reject"
      },
      {
        emp: "abcd",
        type: "sid",
        from: "2019-04-19",
        to: "2019-04-22",
        days: 4,
        reason: "asdfg",
        offer: "Unpaid",
        status: "Reject"
      }
    ];

    function renderLeaveTable(filterType) {
      const tbody = document.getElementById('leaveTableBody');
      let list = filterType
        ? leaves.filter(lv => lv.type.toLowerCase().includes(filterType.toLowerCase()))
        : leaves;
      tbody.innerHTML = '';
      list.forEach((lv, idx) => {
        tbody.innerHTML += `
          <tr>
            <td>${idx + 1}</td>
            <td>${lv.emp}</td>
            <td>${lv.type}</td>
            <td>${lv.from}</td>
            <td>${lv.to}</td>
            <td>${lv.days}</td>
            <td>${lv.reason}</td>
            <td>
              <span class="badge ${lv.offer === 'Paid' ? 'bg-info text-dark' : 'bg-danger'}">${lv.offer}</span>
            </td>
            <td>
              ${lv.status === "Approve"
                ? `<button class="btn btn-success btn-sm me-1" disabled>Approve</button>
                   <button class="btn btn-danger btn-sm" onclick="updateStatus(${idx},'Reject')">Reject</button>`
                : `<button class="btn btn-success btn-sm me-1" onclick="updateStatus(${idx},'Approve')">Approve</button>
                   <button class="btn btn-danger btn-sm" onclick="updateStatus(${idx},'Reject')">Reject</button>`
              }
            </td>
          </tr>
        `;
      });
    }
    function searchLeaves() {
      const type = document.getElementById('searchLeaveType').value.trim();
      renderLeaveTable(type);
    }
    function clearLeaveSearch() {
      document.getElementById('searchLeaveType').value = '';
      renderLeaveTable();
    }
    function updateStatus(idx, newStatus) {
      leaves[idx].status = newStatus;
      renderLeaveTable();
    }
    renderLeaveTable();
  </script>
</body>
</html>
